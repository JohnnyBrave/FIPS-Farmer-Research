<ion-header>
  <ion-navbar color="primary-dark">
    <div class="page-header">
      <button class="farmer-header" ion-button icon-left clear (click)="changeFarmer()">
        <ion-icon name="person"></ion-icon>
        {{farmer.displayName}}</button>
      <!-- <button ion-button clear icon-only>
        <ion-icon name="more"></ion-icon>
      </button> -->
      <button ion-button clear icon-only (click)="editFarmer()">
          <ion-icon name="create"></ion-icon>
        </button>
    </div>
  </ion-navbar>
</ion-header>
<ion-content>
  <div style="display:flex; flex-flow:column; height:100%">
    <div icon-left></div>
    <div class="my-research">
      <h2 item-left>
        <ion-icon name="flask" style="margin: 0 5px"></ion-icon>Current Trials</h2>
      <div *ngFor="let experiment of experiments">
        <ion-card *ngIf="enrolled[experiment._key]">
          <div class="experiment-title-bar">
            <div class="experiment-title">{{experiment.title}}</div>
            <button ion-button icon-only clear color="primary-dark-inverted" (click)="showExperimentDetail(experiment)">
              <ion-icon name="information-circle"></ion-icon>
            </button>
          </div>
          <div class="experiment-content">
            <button ion-button icon-left color="primary-dark-inverted" (click)="collectData(experiment)"><ion-icon name="clipboard"></ion-icon>Collect Data</button>
            <button ion-button icon-left color="primary-dark-inverted" (click)="viewResults(experiment)"><ion-icon name="stats"></ion-icon>View Results</button>
          </div>
        </ion-card>
      </div>
    </div>
    <div class="available-experiments">
      <h2 item-left>
        <ion-icon name="apps" style="margin: 0 5px"></ion-icon>Available Experiments</h2>
      <div *ngFor="let experiment of experiments" style="padding-bottom:5px">
        <ion-card *ngIf="!enrolled[experiment._key]">
          <div style="display: flex">
            <div class="experiment-title pointer"  (click)="showExperimentDetail(experiment)">{{experiment.title}}</div>
            <button ion-button icon-left color="primary-dark-inverted" (click)="enrolFarmer(experiment)">
              <ion-icon name="person-add"></ion-icon>Enrol
            </button>
          </div>
        </ion-card>
      </div>
    </div>

  </div>

</ion-content>

<!-- 
  <div style="flex:1; overflow:auto">
      <ion-slides #experimentSlider pager>
        <ion-slide *ngFor="let experiment of experiments" (click)="openExperiment(experiment)">
          <div class="experiment-title">{{experiment.title}}</div>
          <div class="experiment-image">Image</div>
          <div class="experiment-description">{{experiment.description}}</div>
        </ion-slide>
      </ion-slides>
    </div>
 -->